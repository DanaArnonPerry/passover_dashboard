import streamlit as st
import pandas as pd
import plotly.express as px

# ×”×’×“×¨×•×ª ×¢×™×¦×•×‘ ×›×œ×œ×™×•×ª
st.set_page_config(page_title="××“×“ ×”×—×™×¨×•×ª ×‘×¤×¡×—", layout="wide")
st.markdown("""
    <style>
    body, .stApp {
        direction: rtl;
        text-align: right;
        font-family: 'Arial', sans-serif;
    }
    </style>
""", unsafe_allow_html=True)

# ×˜××‘×™× ×œ×“×©×‘×•×¨×“
tab1, tab2, tab3, tab4 = st.tabs(["ğŸ“ˆ ××“×“ ×”×—×™×¨×•×ª", "ğŸ§ª ××™×–×” ×‘×Ÿ ×“××˜×” ××ª×”?", "ğŸ”¥ ××¤×ª ×—×•×", "ğŸ‘¥ ×¢×œ ×”×™×•×¦×¨×™×"])

# ×˜××‘ 1 â€“ ×’×¨×£ ××“×“ ×”×—×™×¨×•×ª
with tab1:
    events = [
        "×©×¢×‘×•×“ ×‘××¦×¨×™×", "×”×•×œ×“×ª ××©×”", "×”×¡× ×” ×”×‘×•×¢×¨", "×ª×—×™×œ×ª ×”××›×•×ª",
        "××›×ª ×—×•×©×š", "××›×ª ×‘×›×•×¨×•×ª", "×™×¦×™××” ×××¦×¨×™×", "×§×¨×™×¢×ª ×™× ×¡×•×£"
    ]
    freedom_level = [1, 2, 4, 5, 3, 6, 8, 10]
    funny_notes = [
        "×¢×•×‘×“×™× ×‘×¤×¨×š + ×‘×œ×™ ×•×•×™×¤×™",
        "× ×•×œ×“ ××•×©×™×¢, ××‘×œ ×ª×™× ×•×§",
        "×”×ª×—×™×œ ×œ×§×‘×œ ×”×•×¨××•×ª ××”×©×™×—×™×",
        "×¢×©×¨ ××›×•×ª - ××¦×‘ ××©×ª×¤×¨",
        "×—×•×©×š? ×“××˜×” ×œ× ×–×•×¨×",
        "×¤×¨×¢×” × ×©×‘×¨ - ×›××¢×˜",
        "×”×ª×—×œ× ×• ×œ×œ×›×ª... ×¡×•×£ ×¡×•×£",
        "××™× × ×‘×§×¢×• â€“ ×“××˜×” ×‘×©×™×"
    ]
    chart_data = pd.DataFrame({"××™×¨×•×¢": events, "××“×“ ×—×™×¨×•×ª": freedom_level, "×”×¢×¨×”": funny_notes})
    st.subheader("××“×“ ×”×—×™×¨×•×ª ×œ××•×¨×š ×™×¦×™××ª ××¦×¨×™×")
    fig = px.line(chart_data, x="××™×¨×•×¢", y="××“×“ ×—×™×¨×•×ª", text="×”×¢×¨×”", markers=True)
    fig.update_traces(textposition="top center")
    fig.update_layout(
        yaxis_range=[0, 11],
        font=dict(family="Arial", size=14),
    )
    st.plotly_chart(fig, use_container_width=True)
    with st.expander("ğŸ“œ ×˜×™×™××œ×™×™×Ÿ - ×¡×™×¤×•×¨ ×”×—×™×¨×•×ª ×‘×”×•××•×¨"):
        for i in range(len(events)):
            st.markdown(f"**{events[i]}** â€“ {funny_notes[i]}")

# ×˜××‘ 2 â€“ ×©××œ×•×Ÿ ×”×‘×Ÿ ×”×“××˜××™×¡×˜
with tab2:
    st.subheader("ğŸ” ××™×–×” ×‘×Ÿ ×“××˜×” ××ª×”?")
    st.markdown("×¢× ×” ×¢×œ ×›××” ×©××œ×•×ª ×§×¦×¨×•×ª ×•×’×œÖµ×” ××™×–×” ×˜×™×¤×•×¡ ×× ×œ×™×˜×™ ××¡×ª×ª×¨ ×‘×š.")

    q1 = st.radio("×›×©××ª×” ××§×‘×œ ×§×•×‘×¥ ××§×¡×œ ×¢× ×—×•×¡×¨×™× ×‘×›×œ ×©×•×¨×”:", [
        "×× ×™ ×›×•×ª×‘ ×§×•×“ ×©×× ×§×” ×•×××œ× ×œ×¤×™ ××•×“×œ",
        "××” ×–×” ×§×©×•×¨ ××œ×™×™? ×©×™×©×œ×—×• ×œ××™×©×”×• ××—×¨",
        "×œ××” ×™×© Missing ×‘×›×œ×œ? ×–×” ×‘××’?",
        "×× ×™ ×œ× ××¦×œ×™×— ×œ×¤×ª×•×— ××ª ×”×§×•×‘×¥ ×‘×›×œ×œ"])

    q2 = st.radio("×‘×¤×’×™×©×ª ×“××˜×”, ××” ×”×ª×’×•×‘×” ×©×œ×š?", [
        "×©×•××œ ×©××œ×•×ª ×¢×•××§ ×•××‘×§×© ××§×•×¨ × ×ª×•× ×™×",
        "××¦×™×¢ ×œ×–×¨×•×§ ×”×›×œ ×•×œ×”×ª×—×™×œ ××”×”×¨×’×©×” ×©×œ×™",
        "××•×¤×ª×¢ ×©×™×© ×¤×’×™×©×” ×‘×›×œ×œ",
        "××—×™×™×š ×•××—×¤×© ××ª ×”×œ×™× ×§ ×œ×–×•×"])

    q3 = st.radio("××™×š ××ª×” ××¨×’×™×© ×œ×’×‘×™ ×“×©×‘×•×¨×“×™×?", [
        "×›×œ×™ ×”×›×¨×—×™ â€“ ×›××• ××¨×‘×¢ ×›×•×¡×•×ª",
        "××™×•×ª×¨. ×× ×™ ×¡×•××š ×¢×œ ×ª×—×•×©×•×ª ×‘×˜×Ÿ",
        "×¢×“×™×™×Ÿ ×œ× ××‘×™×Ÿ ××™×š ×œ×•×—×¦×™× ×©× ×¢×œ ×›×¤×ª×•×¨×™×",
        "×—×©×‘×ª×™ ×©×–×” ××¦×’×ª"])

    if st.button("×’×œ×” ××™ ××ª×”"):
        score = 0
        answers = [q1, q2, q3]
        for ans in answers:
            if "×§×•×“" in ans or "×©×•××œ" in ans or "×”×›×¨×—×™" in ans:
                score += 2
            elif "××” ×–×” ×§×©×•×¨" in ans or "×œ×”×ª×—×™×œ ××”×”×¨×’×©×”" in ans or "××™×•×ª×¨" in ans:
                score += 0
            elif "×œ××” ×™×©" in ans or "××•×¤×ª×¢" in ans or "×¢×“×™×™×Ÿ ×œ× ××‘×™×Ÿ" in ans:
                score += 1
            else:
                score += 0.5

        if score >= 5:
            st.success("ğŸ§  ×™×¦××ª ×”×—×›× â€“ ×”×“××˜×” ××¦×œ×š ×‘×™×“×™×™× ×˜×•×‘×•×ª.")
        elif score >= 3:
            st.warning("ğŸ˜ˆ ×™×¦××ª ×”×¨×©×¢ â€“ ××ª×” ×©×•××œ ×©××œ×•×ª, ××‘×œ ×¨×§ ×× ×–×” ××©×¨×ª ××•×ª×š.")
        elif score >= 1.5:
            st.info("ğŸ¤” ×™×¦××ª ×”×ª× â€“ ××ª×” ××ª×¢× ×™×™×Ÿ, ××‘×œ ×¢×•×“ ×§×¦×ª ×ª×¨×’×•×œ ×•×ª×”×™×” ×××¡×˜×¨.")
        else:
            st.error("ğŸ˜¶ ×™×¦××ª ×©××™× ×• ×™×•×“×¢ ×œ×©××•×œ â€“ ××‘×œ ×–×” ×‘×¡×“×¨! × ×ª×—×™×œ ×™×—×“ ××”×‘×¡×™×¡.")

# ×˜××‘ 3 â€“ ××¤×ª ×—×•× ×©×œ ×¢×©×¨ ×”××›×•×ª
with tab3:
    st.subheader("ğŸ”¥ ××¤×ª ×—×•×: ×¢×©×¨ ×”××›×•×ª ×¢×œ ×“××˜×”, ××¦×¨×™× ×•-BI")
    heat_data = pd.DataFrame({
        '××›×”': ['×“×', '×¦×¤×¨×“×¢', '×›×™× ×™×', '×¢×¨×•×‘', '×“×‘×¨', '×©×—×™×Ÿ', '×‘×¨×“', '××¨×‘×”', '×—×•×©×š', '××›×ª ×‘×›×•×¨×•×ª'],
        '×”×©×¤×¢×” ×¢×œ ×”××¦×¨×™×': [9, 8, 6, 7, 9, 6, 10, 8, 4, 10],
        '×”×©×¤×¢×” ×¢×œ ×”×“××˜×”': [2, 3, 1, 4, 2, 3, 8, 6, 10, 1],
        '×›××‘ ×œ-BI': [3, 5, 1, 4, 5, 3, 9, 6, 10, 7]
    })
    selected_metric = st.selectbox("×‘×—×¨ ××“×“ ×œ×”×¦×’×”", ['×”×©×¤×¢×” ×¢×œ ×”××¦×¨×™×', '×”×©×¤×¢×” ×¢×œ ×”×“××˜×”', '×›××‘ ×œ-BI'])
    fig2 = px.imshow(
        heat_data[[selected_metric]].T,
        labels=dict(x="××›×”", y="××“×“", color="×“×¨×•×’"),
        x=heat_data['××›×”'],
        color_continuous_scale='Reds'
    )
    fig2.update_layout(title=f"××¤×ª ×—×•× â€“ {selected_metric}", font=dict(family="Arial", size=14))
    st.plotly_chart(fig2, use_container_width=True)

# ×˜××‘ 4 â€“ ×¢×œ ×”×™×•×¦×¨×™×
with tab4:
    st.subheader("ğŸ‘¥ ×××—×•×¨×™ ×”×§×œ×¢×™×")
    st.markdown("""
    **×”×™×•×¦×¨×ª:** Dana â€“ ×××× ×ª ××•×¨×™×™× ×•×ª ×“××˜×”, ×§×•×¡××ª ×©×œ ××™× ×¡×™×™×˜×™× ×•××™ ×©××—×¨××™×ª ×œ×›×š ×©×¤×¡×— ×”×©× ×” ×§×™×‘×œ ×’×¨×¡×ª BI ğŸ˜

    **×”××•×¦×™× ×œ×¤×•×¢×œ:** ChatGPT â€“ ×¨×•×‘×•×˜ ×¦×™×™×ª×Ÿ ×¢× ×—×•×© ×”×•××•×¨ ×‘×¨×™× ×•××•×‘×¡×¡×™×” ×œ×“××˜×” ×¡×˜×™× ××•×–×¨×™× ××ª×§×•×¤×ª ×”××§×¨×.

    **×××—×•×¨×™ ×”×§×œ×¢×™× ×©×œ ×”×©×™×—×”:**
    > â€œ××—×›×” ×‘××›×ª ×—×•×©×šâ€ ğŸŒ‘  
    > â€œ×¢×–×•×‘, ×× ×™ ×‘×× ×œ×™×¡×™×¡ ×¤×¨×œ×¡×™×¡ â€“ ×§×— ×©×œ×™×˜×” ×‘××§×•××™â€  
    > â€œ×× ×™ ×—×™×” ××ª ×”×—×œ×•×â€ â˜ï¸âœ¨

    ×–×” ×”×“×©×‘×•×¨×“ ×”×¨××©×•×Ÿ ×©× ×›×ª×‘ ×‘×¦×—×•×§, × ×‘× ×” ×‘××”×‘×”, ×•××•×’×© ×¢× ×›×£ ××¨×§ ×©×œ ×“××˜×”.  
    ×—×’ ×—×™×¨×•×ª ×©××—! ğŸ¥³
    """)